var RevealNotes=function(){function e(){var e=document.querySelector('script[src$="notes.js"]').src;e=e.replace(/notes\.js(\?.*)?$/,"");var t,n=window.open(e+"notes.html","reveal.js - Notes","width=1100,height=700");function a(){var e=Reveal.getCurrentSlide(),t=e.querySelector("aside.notes"),a={namespace:"reveal-notes",type:"state",notes:"",markdown:!1,state:Reveal.getState()};e.hasAttribute("data-notes")&&(a.notes=e.getAttribute("data-notes")),t&&(a.notes=t.innerHTML,a.markdown="string"==typeof t.getAttribute("data-markdown")),n.postMessage(JSON.stringify(a),"*")}t=setInterval(function(){n.postMessage(JSON.stringify({namespace:"reveal-notes",type:"connect",url:window.location.protocol+"//"+window.location.host+window.location.pathname,state:Reveal.getState()}),"*")},500),window.addEventListener("message",function(e){var n=JSON.parse(e.data);n&&"reveal-notes"===n.namespace&&"connected"===n.type&&(clearInterval(t),Reveal.addEventListener("slidechanged",a),Reveal.addEventListener("fragmentshown",a),Reveal.addEventListener("fragmenthidden",a),Reveal.addEventListener("overviewhidden",a),Reveal.addEventListener("overviewshown",a),Reveal.addEventListener("paused",a),Reveal.addEventListener("resumed",a),a())})}return/receiver/i.test(window.location.search)||(null!==window.location.search.match(/(\?|\&)notes/gi)&&e(),document.addEventListener("keydown",function(t){null!==document.querySelector(":focus")||t.shiftKey||t.altKey||t.ctrlKey||t.metaKey||83===t.keyCode&&(t.preventDefault(),e())},!1)),{open:e}}();